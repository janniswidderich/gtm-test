<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="utf-8" />
   <meta http-equiv="x-ua-compatible" content="ie=edge" />
   <meta name="viewport" content="width=device-width, initial-scale=1" />

   <script>
      // Define dataLayer and the gtag function.
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }

      // Default ad_storage to 'denied'.
      gtag('consent', 'default', {
         'ad_storage': 'denied',
         'analytics_storage': 'denied',
         'personalization_storage': 'denied',
         'wait_for_update': 500,
      });
   </script>

   <!-- Google Tag Manager -->
   <script>
      function loadGTM() {
         (function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
               'gtm.start':
                  new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
               j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                  'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
         })(window, document, 'script', 'dataLayer', 'GTM-KZT3F9Q');
      }
   </script>
   <!-- End Google Tag Manager -->
   <title>GTM Test</title>
</head>

<body>
   <script>
      setTimeout(() => {
         gtag('consent', 'update', {
            'ad_storage': 'granted',
            'analytics_storage': 'granted',
            'personalization_storage': 'granted',
         });
      }, 100);
      loadGTM();
   </script>
</body>

</html>